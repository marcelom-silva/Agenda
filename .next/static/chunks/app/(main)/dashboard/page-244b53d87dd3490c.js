(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{35302:function(t,e,o){Promise.resolve().then(o.bind(o,38760))},38760:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return d}});var r=o(57437),i=o(2265),n=t=>{let{task:e,onEdit:o,onDelete:i}=t;return(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"3px",padding:"10px",marginBottom:"8px",boxShadow:"0 1px 0 rgba(9,30,66,.25)",cursor:"grab",borderLeft:e.colorTag?"5px solid ".concat(e.colorTag):"none"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("h4",{style:{margin:"0 0 5px 0",fontSize:"14px"},children:e.title}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>o(e),style:{marginRight:"5px",padding:"3px 5px",fontSize:"10px",cursor:"pointer"},children:"Editar"}),(0,r.jsx)("button",{onClick:()=>i(e.id),style:{padding:"3px 5px",fontSize:"10px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none"},children:"Excluir"})]})]}),e.description&&(0,r.jsx)("p",{style:{fontSize:"12px",color:"#5e6c84",margin:"0 0 5px 0"},children:e.description})]})},a=t=>{let{columnId:e,title:o,tasks:i,onEditTask:a,onDeleteTask:s}=t;return(0,r.jsxs)("div",{style:{backgroundColor:"#f4f5f7",borderRadius:"3px",width:"300px",minHeight:"400px",padding:"10px",marginRight:"10px",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)("h3",{style:{paddingBottom:"10px",borderBottom:"1px solid #ccc",marginBottom:"10px"},children:[o," (",i.length,")"]}),(0,r.jsx)("div",{style:{flexGrow:1,minHeight:"100px"},children:i.map((t,e)=>(0,r.jsx)("div",{style:{marginBottom:"8px"},children:(0,r.jsx)(n,{task:t,onEdit:a,onDelete:s})},t.id))})]})},s=t=>{let{isOpen:e,onClose:o,onSave:n,task:a}=t,[s,l]=(0,i.useState)(""),[d,c]=(0,i.useState)(""),[x,p]=(0,i.useState)("todo");return((0,i.useEffect)(()=>{a?(l(a.title||""),c(a.description||""),p(a.status||"todo")):(l(""),c(""),p("todo"))},[a,e]),e)?(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,r.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"5px",width:"400px"},children:[(0,r.jsx)("h2",{children:a?"Editar Tarefa":"Nova Tarefa"}),(0,r.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!s.trim()){alert("O t\xedtulo \xe9 obrigat\xf3rio.");return}let e={...a||{},title:s,description:d,status:x};if(null==a?void 0:a.id)n(e);else{let{id:t,...o}=e;n(o)}},children:[(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("label",{htmlFor:"title",children:"T\xedtulo:"}),(0,r.jsx)("input",{type:"text",id:"title",value:s,onChange:t=>l(t.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"},required:!0})]}),(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("label",{htmlFor:"description",children:"Descri\xe7\xe3o:"}),(0,r.jsx)("textarea",{id:"description",value:d,onChange:t=>c(t.target.value),style:{width:"100%",padding:"8px",minHeight:"80px",boxSizing:"border-box"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,r.jsx)("label",{htmlFor:"status",children:"Status:"}),(0,r.jsxs)("select",{id:"status",value:x,onChange:t=>p(t.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"},children:[(0,r.jsx)("option",{value:"todo",children:"A Fazer"}),(0,r.jsx)("option",{value:"doing",children:"Fazendo"}),(0,r.jsx)("option",{value:"done",children:"Feito"})]})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,r.jsx)("button",{type:"button",onClick:o,style:{padding:"10px 15px"},children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",style:{padding:"10px 15px",backgroundColor:"#007bff",color:"white",border:"none"},children:"Salvar"})]})]})]})}):null},l=()=>{let[t,e]=(0,i.useState)({todo:[],doing:[],done:[]}),[o,n]=(0,i.useState)(!1),[l,d]=(0,i.useState)(null),[c,x]=(0,i.useState)(!0),p=(0,i.useCallback)(async()=>{x(!0);try{let t=await fetch("/api/tasks");if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let o=await t.json(),r={todo:[],doing:[],done:[]};for(let t in o.forEach(t=>{t.status&&r[t.status]?r[t.status].push(t):r.todo.push({...t,status:"todo"})}),r)r[t].sort((t,e)=>{var o,r;return(null!==(o=t.order)&&void 0!==o?o:1/0)-(null!==(r=e.order)&&void 0!==r?r:1/0)||new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()});e(r)}catch(t){console.error("Falha ao buscar tarefas:",t)}finally{x(!1)}},[]);(0,i.useEffect)(()=>{p()},[p]);let u=t=>{d(t||null),n(!0)},h=()=>{n(!1),d(null)},g=async t=>{let e={...t,status:t.status||(null==l?void 0:l.status)||"todo"};try{let t;if(l&&l.id)t=await fetch("/api/tasks/".concat(l.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});else{let{id:o,...r}=e;t=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}if(!t.ok){let e=await t.json();throw Error(e.error||"HTTP error! status: ".concat(t.status))}p(),h()}catch(t){console.error("Falha ao salvar tarefa:",t),alert("Erro ao salvar tarefa: ".concat(t instanceof Error?t.message:String(t)))}},f=async t=>{if(confirm("Tem certeza que deseja excluir esta tarefa?"))try{let e=await fetch("/api/tasks/".concat(t),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"HTTP error! status: ".concat(e.status))}p()}catch(t){console.error("Falha ao excluir tarefa:",t),alert("Erro ao excluir tarefa: ".concat(t instanceof Error?t.message:String(t)))}};return c?(0,r.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"Carregando tarefas..."}):(0,r.jsxs)("div",{style:{padding:"20px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,r.jsx)("h1",{children:"Quadro Kanban"}),(0,r.jsx)("button",{onClick:()=>u(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Nova Tarefa"})]}),(0,r.jsx)("div",{style:{display:"flex",gap:"20px",overflowX:"auto"},children:[{id:"todo",title:"A Fazer"},{id:"doing",title:"Fazendo"},{id:"done",title:"Feito"}].map(e=>(0,r.jsx)(a,{columnId:e.id,title:e.title,tasks:t[e.id]||[],onEditTask:u,onDeleteTask:f},e.id))}),o&&(0,r.jsx)(s,{isOpen:o,onClose:h,onSave:g,task:l})]})};function d(){return(0,r.jsx)("div",{children:(0,r.jsx)(l,{})})}}},function(t){t.O(0,[971,117,744],function(){return t(t.s=35302)}),_N_E=t.O()}]);